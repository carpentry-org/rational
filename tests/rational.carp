(load "rational.carp")
(load "Test.carp")

(use-all Rational Test)

(defn main []
  (with-test test
    (assert-equal test
                  &(new 1 4)
                  &(from-float 0.25f)
                  "can covert correctly from float"
    )
    (assert-equal test
                  &(new 12 1)
                  &(from-int 12)
                  "can covert correctly from int"
    )
    (assert-equal test
                  &(new 11 18)
                  &(Rational.+ &(new 1 9) &(new 3 6))
                  "can add correctly"
    )
    (assert-equal test
                  &(new 5 3)
                  &(Rational.- &(new 6 3) &(new 2 6))
                  "can subtract correctly"
    )
    (assert-equal test
                  &(new 3 4)
                  &(Rational./ &(new 3 1) &(new 8 2))
                  "can divide correctly"
    )
    (assert-equal test
                  &(new 3 16)
                  &(Rational.* &(new 1 8) &(new 3 2))
                  "can multiply correctly"
    )
    (assert-equal test
                  &(new 132 25)
                  &(Rational.mod &(new 12 5) &(new 3 4))
                  "can modulo correctly"
    )
    (assert-equal test
                  "(Rational 3/2)"
                  &(str &(new 3 2))
                  "can stringify"
    )
    (assert-equal test
                  12
                  (hash &(new 12 1))
                  "can hash"
    )
  )
)
